<?phpfunction convertHoursToHoursMinutesAndSeconds($hours) {	$integralHours = floor($hours);	$remainderHours = $hours - $integralHours;	$minutes = floor(round($remainderHours / 1 * 60, 1));	$remainderMinutes = $remainderHours / 1 * 60 - $minutes;	$seconds = abs(round(($remainderMinutes / 1 * 60), 2));	//$minutes = str_pad($minutes, 2, '0', STR_PAD_LEFT);	//$seconds = str_pad($seconds, 4, '0', STR_PAD_LEFT);	//$seconds = str_pad($seconds, 5, '0', STR_PAD_RIGHT);	$sexag[0] = $integralHours;	$sexag[1] = $minutes;	$sexag[2] = $seconds;	//return "{$integralHours}:{$minutes}:{$seconds}";	return $sexag;}$obslog = "seticands.log";$file_name = "candlist.list";$fp = fopen($file_name, "r");$imgbase = "http://setiathome.berkeley.edu/~siemion/";//$sexag = convertHoursToHoursMinutesAndSeconds(40.221);//printf("%d%d%.2f\n",$sexag[0],$sexag[1],$sexag[2]);//var_dump($hoursMinutesAndSeconds);print "<kml xmlns='http://www.opengis.net/kml/2.2' hint='target=sky'>\n";print "<Document>\n";print "<Style id='setiathome'><IconStyle><Icon><href>http://setiathome.berkeley.edu/~siemion/setiathome.png</href></Icon></IconStyle></Style>"."\n";print "<Style id='oseti'><IconStyle><Icon><href>http://setiathome.berkeley.edu/~siemion/oseti.png</href></Icon></IconStyle></Style>"."\n";print "<Style id='habitable'><IconStyle><Icon><href>http://setiathome.berkeley.edu/~siemion/habitable.png</href></Icon></IconStyle></Style>"."\n";print "<Style id='defaultsky'><IconStyle><Icon><href>http://setiathome.berkeley.edu/~siemion/defaultsky.png</href></Icon></IconStyle></Style>"."\n";print "<Style id='setiathome_checked'><IconStyle><Icon><href>http://setiathome.berkeley.edu/~siemion/setiathome_checked.png</href></Icon></IconStyle></Style>"."\n";print "<Style id='oseti_checked'><IconStyle><Icon><href>http://setiathome.berkeley.edu/~siemion/oseti_checked.png</href></Icon></IconStyle></Style>"."\n";print "<Style id='habitable_checked'><IconStyle><Icon><href>http://setiathome.berkeley.edu/~siemion/habitable_checked.png</href></Icon></IconStyle></Style>"."\n";print "<Style id='defaultsky_checked'><IconStyle><Icon><href>http://setiathome.berkeley.edu/~siemion/defaultsky_checked.png</href></Icon></IconStyle></Style>"."\n";while (!feof($fp)){   $row = fgets($fp);   $rows = explode(" ", $row);     //print "strlen: ".strlen($rows)."\n";      //print "sizeof: ".sizeof($rows)."\n";   $cnter = 0;   $comment_cnt = 0;   for($i = 0; $i < sizeof($rows); $i++) {   		if(strlen($rows[$i]) > 0){ 			$candidate[$cnter] = $rows[$i];			$cnter++;      			if($cnter == 9) $comment_cnt = $i;		}   }   //print $cnter."\n";         if( (strcmp($candidate[0], "#") != 0) && $cnter > 5){		 $name = $candidate[0];		 $ra = $candidate[1];		 $dec = $candidate[2];		 $comment = "";		 		 if($comment_cnt > 0){			for($i = $comment_cnt; $i < sizeof($rows); $i++) {			   $comment = $comment.$rows[$i]." ";			}		 }		 		 		 //print "name: ".$name."\n";		 //print "ra: ".$ra."\n";		 //print "dec: ".$dec."\n";		 //print "comment: ".$comment."\n";		 $multiplier = 1;		 if(strcmp("-", substr($dec, 0, 1)) == 0) $multiplier = -1; 		 $radecimal = (float) substr($ra, 0, 2) + ((float) substr($ra, 2, 2) / 60.0) + ((float) substr($ra, 4, 5) / 3600.0);		 //print "ra decimal: ".$radecimal."\n";		 $decdegrees = ((float) substr($dec, 1, 2) + ((float) substr($dec, 3, 2) / 60.0) + ((float) substr($dec, 5, 5) / 3600.0)) * $multiplier;		 		 //print "dec decimal: ".$decdegrees."\n";		 		 $radegrees = ($radecimal / 24 * 360) - 180;		 		 $cmdoutput = shell_exec("grep ".$name." ".$obslog);		 		  if(strpos($name, "OSET") === 0) {			  	if(strlen($cmdoutput) > 0) {			  		$style = "oseti_checked"; 			  	} else { 			  		$style = "oseti";				}		  } else if(strpos($name, "HAB") === 0) {			  	if(strlen($cmdoutput) > 0) {			  		$style = "habitable_checked"; 			  	} else {			  		$style = "habitable";			  	}		  } else if(strpos($name, "ET") === 0) {			  	if(strlen($cmdoutput) > 0) {			  		$style = "setiathome_checked"; 			  	} else {			  		$style = "setiathome";		  				}		  } else {			  	if(strlen($cmdoutput) > 0) {			  		$style = "defaultsky_checked"; 			  	} else {			  		$style = "defaultsky";		  		  		}		  }		  print "<Placemark>"."\n";		  print "<styleUrl>#".$style."</styleUrl>"."\n";		  print "<name>".$name."</name>"."\n";		  print "<description>"."\n";		  print "<![CDATA["."\n";		  print $comment."\n";		  print "]]>"."\n";		  print "</description>"."\n";		  print "<LookAt>"."\n";		  print "<longitude>".$radegrees."</longitude>"."\n";		  print "<latitude>".$decdegrees."</latitude>"."\n";		  print "<altitude>0</altitude>"."\n";		  print "<range>10000</range>"."\n";		  print "<tilt>0</tilt>"."\n";		  print "<heading>0</heading>"."\n";		  print "</LookAt>"."\n";		  print "<Point>"."\n";		  print "<coordinates>".$radegrees.",".$decdegrees.",0</coordinates>"."\n";		  print "</Point>"."\n";		  print "</Placemark>"."\n\n";		      }}fclose ($fp);		print "</Document>\n";		print "</kml>\n";?>